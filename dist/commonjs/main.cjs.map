{"version":3,"file":"main.cjs","sources":["../../node_modules/@jsenv/core/helpers/babel/typeof/typeof.js","../../src/internal/assertImportMap.js","../../src/internal/hasScheme.js","../../src/internal/urlToScheme.js","../../src/internal/urlToPathname.js","../../src/internal/urlToOrigin.js","../../src/internal/pathnameToDirectoryPathname.js","../../src/resolveUrl.js","../../src/internal/tryUrlResolution.js","../../src/resolveSpecifier.js","../../src/applyImportMap.js","../../node_modules/@jsenv/core/helpers/babel/defineProperty/defineProperty.js","../../node_modules/@jsenv/core/helpers/babel/objectSpread2/objectSpread2.js","../../src/composeTwoImportMaps.js","../../src/sortImportMap.js","../../src/normalizeImportMap.js","../../src/internal/pathnameToExtension.js","../../src/resolveImport.js"],"sourcesContent":null,"names":["nativeTypeOf","obj","customTypeOf","Symbol","constructor","prototype","iterator","assertImportMap","value","TypeError","type","Array","isArray","hasScheme","string","test","urlToScheme","urlString","colonIndex","indexOf","slice","urlToPathname","ressourceToPathname","urlToRessource","scheme","length","afterProtocol","pathnameSlashIndex","ressource","searchSeparatorIndex","urlToOrigin","secondProtocolSlashIndex","pathnameToDirectoryPathname","pathname","slashLastIndex","lastIndexOf","resolveUrl","specifier","baseUrl","writeBaseUrlMustBeAString","Error","writeBaseUrlMustBeAbsolute","writeBaseUrlRequired","baseOrigin","basePathname","baseDirectoryPathname","unresolvedPathname","importerFolders","split","pop","resolvedPathname","join","tryUrlResolution","url","result","resolveSpecifier","importer","startsWith","applyImportMap","importMap","writeSpecifierMustBeAString","writeImporterMustBeAString","writeImporterMustBeAbsolute","specifierUrl","specifierNormalized","scopes","scopeKeyMatching","Object","keys","find","scopeKey","specifierIsPrefixOf","scopeValue","remappingFromScopeImports","applyImports","imports","remappingFromImports","writeBareSpecifierMustBeRemapped","importKeyArray","i","importKey","importValue","afterImportKey","specifierHref","href","key","defineProperty","enumerable","configurable","writable","target","arguments","source","ownKeys","forEach","getOwnPropertyDescriptors","defineProperties","getOwnPropertyDescriptor","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","push","apply","composeTwoImportMaps","leftImportMap","rightImportMap","composeTwoImports","composeTwoScopes","leftImports","rightImports","leftScopes","rightScopes","hasOwnProperty","sortImportMap","sortImports","undefined","sortScopes","importsSorted","sort","compareLengthOrLocaleCompare","name","scopesSorted","scopeName","a","b","localeCompare","normalizeImportMap","formulateBaseUrlMustBeAString","normalizeImports","normalizeScopes","importsNormalized","address","console","warn","formulateAddressMustBeAString","specifierResolved","addressUrl","formulateAdressResolutionFailed","endsWith","formulateAddressUrlRequiresTrailingSlash","scopesNormalized","scope","scopeUrl","formulateScopeResolutionFailed","scopeValueNormalized","addressURL","pathnameToExtension","dotLastIndex","resolveImport","defaultExtension","applyDefaultExtension","extension","importerPathname","importerExtension"],"mappings":"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"}